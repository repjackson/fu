template(name='posts')
    .ui.container
        if currentUser
            #add_post.ui.large.icon.basic.button
                i.plus.icon
        +cloud filter='post'
        .ui.hidden.divider
        .ui.centered.grid
            .ten.wide.column
                each posts
                    +post_item


template(name='post_card')
    .ui.fluid.card
        .ui.centered.image
            a(href="/post/view/#{_id}")
                img(src="{{c.url image_id  height=300 crop='fill' gravity='face' }}")
        .content
            .header
                a(href="/post/view/#{_id}")
                    h2.ui.header #{title}
            if publish_date
                .meta
                    | Published #{publish_when}
            .content
                |#{snippet}
                // |!{content}
        .content
            each tags
                .ui.compact.button.post_tag(class=tag_class) #{this}
            if isInRole 'admin'
                .edit_post.ui.primary.basic.right.floated.button
                    i.pencil.icon
                    |Edit Post    
        .content
            +favorite

            
template(name='post_item')
    | !{content}
    a.ui.basic.icon.button(href="/post/view/#{_id}") 
        i.arrow.right.icon
        
        
template(name='edit_post')
    with post
        .ui.container
            .ui.center.aligned.header Edit Post
            .ui.form
                +title
                +image
                .field
                    label Publish Date
                    input#publish_date(type='date' value=publish_date)
                +content
                +tags
                +published
                +featured
                if title
                    #save_post.ui.green.button 
                        i.check.icon
                        |Save
                +delete


template(name='post_page')
    with post
        .ui.container
            a.ui.top.left.attached.basic.button(href="/posts")
                i.arrow.left.icon
                |posts
            if image_id
                img.ui.centered.image(src="{{c.url image_id height=500 width=800 background='white' crop='lpad'}}")
            h1.ui.header #{title}
            .ui.stackable.divided.grid
                .twelve.wide.column
                    .content
                        if publish_date
                            h4.ui.header Published #{publish_when}
                        .ui.basic.segment
                            |!{content}
                        if tags
                            .ui.basic.segment
                                each tags
                                    .ui.basic.label #{this}
                    // +user_blurb
                .four.wide.column
                    if isInRole 'admin'
                        .ui.divider
                        i.large.red.configure.icon
                        .edit_post.ui.basic.button
                            i.pencil.icon
                            |Edit
                        if published
                            .ui.green.label Published
                        else
                            .ui.red.label Unpublished                        
                        if featured
                            .ui.green.label Featured
                        else
                            .ui.red.label Unfeatured